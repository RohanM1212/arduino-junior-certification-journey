Lesson Nine (Post Lesson Reflection)

Today's lesson is about phototransistors. They are essentially the opposites of LEDs. They sense light and send an electric signal back to the arduino based on the intensity of the light. LEDs, on the other hand, emit light based on the intensity of the electric signal sent to them by the arduino. Even though it might seem like they are, they aren't direct opposites because the phototransistor doesn't send the exact electric signal that signals the intensity of the light back to the arduino. There is a transistor in it so it amplifies the electric signal sent to the arduino. This is done because if the electric signal wasn't amplified, the signal that the phototransistor would send back would be so miniscule that the Arduino wouldn't be able to even notice that signal. In the coding aspect of the lesson, I learned something brand new. I found out that it is possible to send signals to the arduino through the serial monitor. We can also program which inputs into the serial monitor lead to which outputs in the actual circuit. That makes me wonder, can I send commands to the circuit through the serial monitor even if the computer isn't connected to the circuit? That is probably where bluetooth comes in, but is it possible with Arduino? Some bad news, though, is that I couldn't experience this lesson in its entirety again because I was missing a capacitor. It would've been such a great feeling to build the circuit in this lesson and see it work, because it is my favorite circuit in all the lessons I've done. It's alright though because I still learned from the lesson. I also learned a way that phototransistors were used for communication. In the first circuit I built for this lesson, the LED worked as the transmitter and the phototransistor worked as a receiver. This works really well because the person on one end can type a signal into the serial monitor and transmit it through the LED, and the other person can receive it on their serial monitor through the phototransistor. This effectively created a way for two people to communicate. The first iteration of such a system was when our understanding of electricity and magnetism were in their infancy. In fact, we only created such a communication system because Heinrich Hertz wanted to prove that electricity and magnetism travel through space as invisible waves. How his circuit worked was that the transmitter created an electrical spark that jumped between two live wires. Then, the receiver created a spark of its own even though it was several feet away. How else could electricity travel through the two in a form other than a wave? Because of this shocking discovery, we have things like radios, television, and even the internet. The funny thing is, Hertz thought his invention was useless but died before he could see the advancements we made in technology due to his discovery. What I can gather from this is that, again, the three principles of innovation stand. Even though there was no necessity, or irritation for that matter, curiosity was still there. In all the lessons I've done, inventions or discoveries have only come from these, irritation, necessity, curiosity, or a combination of them. Another thing I learned is that nothing is ever useless. Hertz thought that this discovery of his was useless, but it turned out to be one of the greatest discoveries of man-kind. Because of this, I will now think carefully before ignoring an idea or throwing out something I think is "useless". Going back to the phototransistor, I can think of so many applications of it that are being used right now in the world. In my community when the sun sets, the street lights automatically turn on. Each street light most likely has its own phototransistor and would be programmed to turn on when the light detected by the phototransistor is under a certain threshold. The phototransistor probably wouldn't be close to the lamp though because we only want the phototransistor to detect the light from the sky and not from the lamp as well. If the phototransistor detected the light from the lamp, the lamp would never stay on because as soon as the light turns on, the phototransistor detects a light level higher than a certain threshold, making the program think it is day then turning off the lamp. But then as soon as that happens, the phototransistor then detects a light level below the night threshold and turns the lamp back on again. This cycle would keep repeating if the phototransistor was close to the lamp. If we had to keep the phototransistor close to the lamp, though, we would then have to subtract the light level from the lamp from the measured light level of the phototransistor to measure the actual brightness of the sky and have the code work as intended. This is just one of the many examples of applications that the phototransistor has. 

Now for the vocabulary:

Phototransistor - An electronic component that converts light energy into electrical energy. It combines a photodiode with a transistor to amplify the current, making it useful for detecting light in circuits.
Called function - Lines of code that perform a specific task and can be run whenever needed in the main program. Functions help organize code by grouping related commands together and avoiding repetition.
Buffer - A temporary storage location that holds data briefly as it moves from one place to another. Arduino's buffer is FIFO (first in, first out), meaning data is processed in the order it arrives.
ASCII code - A system that assigns a numerical byte value to every letter, digit, and many special characters. This allows characters to be read and sent digitally.
Electromagnetic spectrum - The complete range of electromagnetic waves, identified by their wavelengths. This includes radio waves, microwaves, infrared, visible light, ultraviolet, X-rays, and gamma rays.
Fiber optics - Technology that uses light to transmit information through thin glass or plastic cables.
Transverse wave - A wave that oscillates perpendicular to the direction it travels. Light is a transverse wave, unlike sound which is a longitudinal wave.
Wavelength - The distance between two consecutive waves. Wavelength determines the characteristics of electromagnetic waves, including their properties and how they interact with everything.
Serial monitor input - The ability to send commands and data from a computer to an Arduino through the serial monitor.
For loop - A programming structure that repeats commands a specific number of times using a variable. The loop includes initialization, a condition to check, and an increment to change the counter.

How phototransistors work:
A phototransistor is essentially the reverse of an LED. An LED converts electrical energy into light energy - when electrons flow through the LED, photons are emitted and light is produced. A photodiode reverses this process. When light strikes a photodiode, light energy is converted into electrical energy and an electric current is produced. The problem is that the current from a photodiode alone is very small and not very useful. However, if you combine the photodiode with a transistor, the transistor amplifies the current, making it strong enough to be useful in a circuit. The phototransistor in the kit looks like a clear LED with a flat top instead of a round dome. It has an anode (long leg) and cathode (short leg) just like an LED, but it detects light instead of producing it.

Light sensing circuit:

The first circuit had a phototransistor and a blue LED. The phototransistor's anode connected to 5V through a jumper wire, and its cathode connected to analog pin A0 and also to ground through a 10k Ohm resistor. This created a voltage divider where the phototransistor's resistance changed based on light intensity, which changed the voltage at A0. The blue LED connected to digital pin 10 with a 220 Ohm resistor to ground. The LED acted as a light transmitter, blinking on and off in 2-second intervals. The phototransistor acted as a receiver, detecting the LED's light and outputting intensity measurements. The code for this lesson wasn't that bad. It was quite simple actually. As we discussed before, the phototransistor and LED can create a system where two parties can communicate. If we want to simulate this type of system, we would need a transmit and receive function, so that is what I did. The methods themselves were quite simple. The transmitter function makes the LED blink on and off in 2-second intervals using a timer. The receiver function reads the phototransistor every 100 milliseconds and outputs the light intensity. They run independently at different rates, which simulates how a transmitter and receiver would work in a real communication system - one sending signals and the other constantly listening.. The receiver function, on the other hand, receives for the entire time but the user can delay each input of the phototransistor however much they would like. The users can't actually change these values that I've stated they can, yet. If I were to code the serial monitor inputs into these I could, but I didn't because I wanted to create the second circuit. Still, this code simulates a transmitter and receiver system between two parties.

Light Wave Radar Circuit:

The second circuit added a servo motor to create a scanning radar system. The servo connected to digital pin 3, with its power and ground wires running through a 100 microFarad capacitor. The capacitor is important because servo motors can cause voltage drops when they move, and the capacitor helps stabilize the power supply. I would've taped the phototransistor's wires to the servo horn if I created the circuit in real life. This would allow the sensor to point in different directions and measure light intensity at various angles around the room. The manual version of the radar used serial monitor input to control the servo. Typing a plus sign (+) increased the servo angle by 10 degrees, and typing a minus sign (-) decreased it by 10 degrees. The code used a switch-case structure to handle these two commands. When the servo reached its limits (0 or 180 degrees), the blue LED would blink as a visual indicator that it couldn't move further. After each movement, the code read the light sensor and displayed both the current angle and the light intensity.
The automatic version continuously swept back and forth without requiring input. Two for loops controlled the servo - one moving from 0 to 180 degrees, and another moving back from 180 to 0 degrees. As it scanned, the code tracked the highest and lowest light intensity readings and the angles where they occurred. The collectData() function moved the servo, read the sensor, and compared the reading to the stored maximum and minimum values. The printData() function outputs six values to the serial monitor: current angle, current light intensity, maximum light intensity, angle of maximum, minimum light intensity, and angle of minimum.

One major improvement in this lesson was learning to organize code with called functions. Before this, everything was crammed into the void loop, but breaking tasks into transmitter(), receiver(), collectData(), and printData() functions made the code way cleaner and easier to debug. Each function does one specific job, so if something breaks I know exactly where to look.

I honestly found this lesson as one of the most interesting, but the circuit has to be my favorite. In none of the previous sessions have I been able to create something in which the user can actually interact with. I found it really fun to be able to mess with the serial monitor commands and program the commands. This is exactly like the scanner class in java and it opens up so many more possibilities of what I can do. I also have a lot of experience with getting user input through my classes, so I had no trouble learning it, and I am just imagining what I can do in robotics with user input. The only thing I am left wondering is how can I connect the serial monitor to the arduino without the wire. That is my next goal to learn after this certification is over. I don't know if it is possible to do with an arduino, but I will still try.
